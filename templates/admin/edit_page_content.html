<!--
 * Nom de l'application : CyberConfiance
 * Description : Fichier edit_page_content.html du projet CyberConfiance
 * Produit de : MOA Digital Agency, www.myoneart.com
 * Fait par : Aisance KALONJI, www.aisancekalonji.com
 * Auditer par : La CyberConfiance, www.cyberconfiance.com

-->

<!--
  CyberConfiance
  By MOA Digital Agency LLC
  Developed by: Aisance KALONJI
  Contact: moa@myoneart.com
  www.myoneart.com
-->
{% extends "admin/base.html" %}

{% block title %}Éditer {{ page_name }} - Administration{% endblock %}

{% block content %}
<div class="admin-header">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h1>Éditer {{ page_name }}</h1>
            <p>Modifiez le contenu textuel affiché sur cette page</p>
        </div>
        <a href="{{ url_for('admin_panel.content_management') }}" class="btn btn-secondary">← Retour</a>
    </div>
</div>

<form method="POST" action="{{ url_for('admin_panel.edit_page_content', page=page) }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    <div class="admin-card">
        <h3>Paramètres de contenu</h3>
        
        {% if settings %}
        <p style="margin-bottom: 2rem; color: var(--text-secondary);">
            Modifiez les valeurs ci-dessous puis cliquez sur "Enregistrer les modifications".
        </p>
        
        <div style="display: grid; gap: 1.5rem;">
            {% for setting in settings %}
            <div class="form-group">
                <label for="setting_{{ setting.key }}" style="display: block; color: var(--text-primary); margin-bottom: 0.5rem; font-weight: 500;">
                    {{ setting.key|replace('_', ' ')|title }}
                    {% if setting.description %}
                    <span style="color: var(--text-secondary); font-weight: normal; font-size: 0.85rem;">({{ setting.description }})</span>
                    {% endif %}
                </label>
                
                {% if setting.value_type == 'text' or not setting.value_type %}
                <textarea id="setting_{{ setting.key }}" name="setting_{{ setting.key }}" rows="4" class="admin-filter-input" style="width: 100%; font-family: inherit; resize: vertical;">{{ setting.value }}</textarea>
                {% elif setting.value_type == 'string' %}
                <input type="text" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}" value="{{ setting.value }}" class="admin-filter-input" style="width: 100%;">
                {% else %}
                <input type="text" id="setting_{{ setting.key }}" name="setting_{{ setting.key }}" value="{{ setting.value }}" class="admin-filter-input" style="width: 100%;">
                {% endif %}
                
                {% if setting.updated_at %}
                <small style="color: var(--text-secondary); margin-top: 0.25rem; display: block;">
                    Dernière modification : {{ setting.updated_at.strftime('%d/%m/%Y à %H:%M') }}
                </small>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        
        <div style="margin-top: 2rem; display: flex; gap: 1rem;">
            <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
            <a href="{{ url_for('admin_panel.content_management') }}" class="btn btn-secondary">Annuler</a>
        </div>
        {% else %}
        <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
            <p style="margin-bottom: 1rem;">Aucun paramètre de contenu défini pour cette page.</p>
            <p style="font-size: 0.9rem;">
                Pour ajouter des paramètres personnalisables, accédez à 
                <a href="{{ url_for('admin_panel.site_settings') }}" style="color: var(--accent-blue);">Paramètres > Site</a> 
                et créez des paramètres avec la catégorie "{{ page }}".
            </p>
        </div>
        {% endif %}
    </div>
</form>

<style>
.form-group {
    background: rgba(255, 255, 255, 0.02);
    padding: 1.5rem;
    border-radius: 8px;
    border: 1px solid rgba(59, 130, 246, 0.1);
}

.form-group:hover {
    background: rgba(255, 255, 255, 0.03);
    border-color: rgba(59, 130, 246, 0.2);
}
</style>
{% endblock %}
